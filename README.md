Инструкция к программе PORTAL_Fixer.

Программа состоит из подпрограмм:
1. Программа создания файла SVSU_import и обновления ВК SVSU.
        Что нужно для работы программы:
    1) в папке SVSU\NPP_models должны быть все видеокадры, которые есть в СВСУ.
    2) в папках (SVBU_1 или SVBU_2)\NPP_models нужны самые актуальные видеокадры с 1-го и 2-го блока соответственно.
    3) в папке SVSU\DbDumps файлы PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp из папки DbDumps СВСУ самой последней базы данных.
    4) в папках (SVBU_1 или SVBU_2)\DbDumps файлы PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp из папки DbDumps СВБУ_1 и СВБУ_2 самой последней базы данных.
    
            Возможности программы:
        1. Обновление видеокадров СВБУ из папки NPP_models_new
    Данный пункт сделан для обновления видеокадров СВБУ после их изменения на блоке.
    Все последние видеокадры сбрасываются в папку (SVBU_1 или SVBU_2)\NPP_models_new.
    После выполнения программы все видеокадры из папки (SVBU_1 или SVBU_2)\NPP_models
    обновляться если из папки (SVBU_1 или SVBU_2)\NPP_models_new если они там есть.

        2. Обновление видеокадров СВСУ видеокадрами из СВБУ
    Обновить все видеокадры из папки SVSU\NPP_models видеокадрами из папок (SVBU_1 или SVBU_2)\NPP_models.
    Данный пункт меню сделан для обновления видеокадров СВСУ. Программа берет список
    файлов в папках (SVBU_1 или SVBU_2)\NPP_models и SVSU\NPP_models и заменяет
    файлы в SVSU\NPP_models файлами из папок (SVBU_1 или SVBU_2)\NPP_models.

        3. Найти и сделать disable кнопок вызова ВК, которых нет в СВСУ
    Этот пункт лучше использовать после пункта №2. Данный пункт меню составляет
    список видеокадров из папки SVSU\NPP_models, далее он просматривает
    последовательно все видеокадры из папки SVSU\NPP_models и если находит переход
    на отсутствующий видеокадр, которого нет в папке,
    то добавляет строку <rt:dyn type="Disable" mode="constant" value="true"/>,
    которая делает данный переход не кликабельным и серым.
    После просмотра программа кладет отредактированные кадры в
    папку SVSU\NPP_models_new, которые можно забирать и нести на СВСУ, где при помощи
    программы PORTAL/BIN/PortalSync раскидать кадры на все ARM. Не забываем, что
    ВК нужно обновить и на неоперативном контуре.

        4. Подготовка файла SVSU_import для базы данных СВБУ.
    Данный пункт необходим для создания списка сигналов из базы данных СВБУ
    и передачи их в СВСУ исходя из необходимых кадров. В начале выполнения
    программа предложит забэкапить старый файл SVSU_IMPORT.txt если он есть.
    После завершения программы в папке соответствующего блока появится файл
    SVSU_IMPORT.txt, который подкидывается в DbSrc при заливе СВБУ.
    Также можно вывести все изменения, которые произошли с прошлой генерации
    если есть старый файл (SVSU_IMPORT_bck.txt)
    
2. Программа поиска кривых привязок на ВК и сортировка их по принадлежности цехам.
    Для работы программы необходимо из последних DbDumps нужного блока 2 файла
    (файл PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp) положить в (SVBU_1 или SVBU_2)\DbDumps,
    а в папку NPP_models нужного блока, последние видеокадры блока из папки NPP_models.

    Возможности программы:

    1. Обновление видеокадров СВБУ из папки NPP_models_new
    Данный пункт сделан для обновления видеокадров СВБУ после их изменения на блоке.
    Все последние видеокадры сбрасываются в папку (SVBU_1 или SVBU_2)\NPP_models_new.
    После выполнения программы все видеокадры из папки (SVBU_1 или SVBU_2)\NPP_models
    обновляться если из папки (SVBU_1 или SVBU_2)\NPP_models_new если они там есть.

    2. Парсит ВК из папки (SVBU_1 или SVBU_2)\NPP_models и найденные несоответствия
    кладет в (SVBU_1 или SVBU_2)\Замечания по видеокадрам\(KKS ВК).txt

    3. Найденные замечания из пункта 2 сортирует по папкам согласно списку.
    Cписок для сортировки содержится в файле (SVBU_1 или SVBU_2)\date\kks_vis_groups.json.
    При отсутствии списка, программа не произведет сортировку.

3. Программа создания новых паспортов для видеокадров
    В разработке, использование только в тестовом режиме.

4. Программа создания файлов для TCP-Gate.
    Для работы программы необходимо из последних DbDumps нужно 3 файла
    (файл PLS_ANA_CONF.dmp, PLS_BIN_CONF.dmp, PLS_BIN_NARY_CONF.dmp) положить
    в папку (SVBU_1 или SVBU_2 или SVSU)/DbDumps.
    Последние видеокадры из папки NPP_models скопировать
    в папку (SVBU_1 или SVBU_2 или SVSU)/NPP_models.
    Файл list_kks_svg_TcpGate.txt содержащий список видеокадров, которые цех связи
    использует в АСУП, скопировать в папку (SVBU_1 или SVBU_2 или SVSU)/data
    При необходимости в папку (SVBU_1 или SVBU_2 или SVSU)/data/TcpGate
    положить файлы с сигналами полученные от цеха связи для проверки этих
    сигналов в базе данных и добавления их в файл ZPUPD.cfg

        Возможности программы:
    1. Обновление видеокадров СВБУ из папки NPP_models_new
    Данный пункт сделан для обновления видеокадров СВБУ после их изменения на блоке.
    Все последние видеокадры сбрасываются в папку (SVBU_1 или SVBU_2)\NPP_models_new.
    После выполнения программы все видеокадры из папки (SVBU_1 или SVBU_2)\NPP_models
    обновляться если из папки (SVBU_1 или SVBU_2)\NPP_models_new если они там есть.

    2. Создание файла ZPUPD.cfg.
    Программа предлагает выбрать систему для которой будет создан файл ZPUPD.cfg.
    Если выбрать СВБУ_1 или СВБУ_2, программа загружает из файла list_kks_svg.txt
    список имен видеокадров на которых будет вестись поиск сигналов.
    Дальше поочередно берет нужный svg файл из (SVBU_1 или SVBU_2)/NPP_models,
    если там его нет, пробует найти этот видеокадр в SVSU/NPP_models,
    и находит на нем все сигналы проверяя наличие их в базе данных.
    На выходе получаем в папке (SVBU_1 или SVBU_2)/TCP-Gate файл ZPUPD.cfg, 
    который нужно передать цеху связи и во время заливки системы подкинуть его 
    на сервер УПД (вход с неоперативного контура) RTS/conf/TcpGateConf/ZPUPD.cfg.
    Если выбрать СВСУ, программа будет работать точно так же, только из
    базы данных СВСУ будут предварительно удалены все сигналы баз 1-го и 2-го
    блоков.

5. Программа "работа с исходниками"
    1) Создание файла altStation
    Для выполнения программы необходимы самые свежие видеокадры системы положить в папку NPP_models
    и последние файлы с сигналами (PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp) в папку DbDumps.
    По завершению программы будет создан файл altStation.dic в корне системы для которой запускалась программа.
    После этого он используется во время заливки как исходник в директории DbSrc.

        Возможности программы:
    Парсит ВК из папки (SVBU_1 или SVBU_2)\NPP_models и ведет поиск привязок на видеокадрах и записывает в файл
    (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_1)\altStation.dic все найденные KKS сигналов с пометкой на каком видеокадре он найден.

    2) Программа проверки файла ana_file-1.txt
    Для работы программы необходимо из последних DbSrc взять файл ana_file-1.txt
    и положить в папку (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_1)/DbSrc.
        Возможности программы:
    Проверяет файл (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_2)\DbSrc\ana_file-1.txt на
    наличие в формулах расчета сигналов, которых нет в базе

    3) Программа проверки файла bin_file-1.txt
    Для работы программы необходимо из последних DbSrc взять файл bin_file-1.txt
    и положить в папку (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_1)/DbSrc.
        Возможности программы:
    Проверяет файл (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_2)\DbSrc\bin_file-1.txt на
    наличие в формулах расчета сигналов, которых нет в базе

    4) Программа проверки файлов bin_file(00-13).rep
        Возможности программы:
    Проверяет файлы (SVBU_1 или SVBU_2)\DbSrc\bin_file-1.txt на
    наличие в формулах расчета сигналов, которых нет в базе

    Для работы программы необходимо из последних DbSrc взять 2 файла (bin_file-1.txt и ana_file-1.txt)
    и положить в папку (SVBU_1 или SVBU_2 или SVSU или SKU_VP_1 или SKU_VP_1)/DbSrc.


Программа была разработана инженером-программистом 2 категории участка СВУ
Кузьмицким Алексеем Сергеевичем в 2022-2024 году.
При возникновении каких-либо вопросов можно обратиться ко мне по телефону +375 29 226 11 42. Успешной работы!
