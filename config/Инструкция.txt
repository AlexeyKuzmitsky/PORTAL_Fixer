Инструкция к программе PORTAL_Fixer.

Программа состоит из подпрограмм:
1. Программа создания файла SVSU_import и обновления ВК SVSU.
        Что нужно для работы программы:
    1) в папке SVSU\NPP_models должны быть все видеокадры, которые есть в СВСУ.
    2) в папках (SVBU_1 или SVBU_2)\NPP_models нужны самые актуальные видеокадры
    с 1-го и 2-го блока соответственно.
    3) в папке SVSU\DbDumps файлы PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp из папки
    DbDumps СВСУ самой последней базы данных.
    4) в папках (SVBU_1 или SVBU_2)\DbDumps файлы PLS_ANA_CONF.dmp и 
    PLS_BIN_CONF.dmp из папки DbDumps СВБУ_1 и СВБУ_2 самой последней базы данных.
    
            Возможности программы:
        1. Обновление видеокадров СВСУ видеокадрами из СВБУ
    Обновить все видеокадры из папки SVSU\NPP_models видеокадрами из папок
    (SVBU_1 или SVBU_2)\NPP_models.
    Данный пункт меню сделан для обновления видеокадров СВСУ. Программа берет список
    файлов в папках (SVBU_1 или SVBU_2)\NPP_models и SVSU\NPP_models и заменяет
    файлы в SVSU\NPP_models файлами из папок (SVBU_1 или SVBU_2)\NPP_models.

        2. Найти и сделать disable кнопок вызова ВК, которых нет в СВСУ
    Этот пункт лучше использовать после пункта №1. Данный пункт меню составляет
    список видеокадров из папки SVSU\NPP_models, далее он просматривает
    последовательно все видеокадры из папки SVSU\NPP_models и если находит переход
    на отсутствующий видеокадр, которого нет в папке, 
    то добавляет строку <rt:dyn type="Disable" mode="constant" value="true"/>,
    которая делает данный переход не кликабельным и серым.
    После просмотра программа кладет отредактированные кадры в
    папку SVSU\NPP_models_new, которые можно забирать и нести на СВСУ, где при помощи
    программы PORTAL/BIN/PortalSync раскидать кадры на все arm. Не забываем, что
    ВК нужно обновить и на неоперативном контуре.

        3. Программа обновления списка сигналов(для подготовки файла SVSU_IMPORT, п4)
    Парсит файлы PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp. 
    Собранные сигналы ANA и BIN кладет в папку
    (SVBU_1 или SVBU_2 или SVSU)\date в файлы ANA_list_kks.txt, BIN_list_kks.txt,
    ANA_json_kks.json, BIN_json_kks.json.

        4. Подготовка файла SVSU_import для базы данных СВБУ.
    Этот пункт лучше использовать после пункта №3 (обновлять базу всех систем).
    Данный пункт необходим для создания списка сигналов из базы данных СВБУ
    и передачи их в СВСУ исходя из необходимых кадров. 
    После завершения программы в папке соответствующего блока появится файл
    SVSU_IMPORT.txt, который подкидывается в DbSrc при заливе СВБУ
    
2. Программа поиска кривых привязок на ВК и сортировка их по принадлежности цехам.
    Для работы программы необходимо из последних DbDumps нужного блока 2 файла
    (файл PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp) положить в (SVBU_1 или SVBU_2)\DbDumps,
    а в папку NPP_models нужного блока, последние видеокадры блока из папки NPP_models.

    Возможности программы:
    1. Обновление списка сигналов из базы. Парсит файлы PLS_ANA_CONF.dmp и
    PLS_BIN_CONF.dmp. Собранные сигналы ANA и BIN кладет в папку
    (SVBU_1 или SVBU_2)\date в файлы ANA_list_kks.txt, BIN_list_kks.txt,
    ANA_json_kks.json, BIN_json_kks.json.

    2. Парсит ВК из папки (SVBU_1 или SVBU_2)\NPP_models и найденные несоответствия
    кладет в (SVBU_1 или SVBU_2)\Замечания по видеокадрам\(KKS ВК).txt

    3. Найденные замечания из пункта 2 сортирует по папкам согласно списку.
    Cписок для сортировки содержится в файле (SVBU_1 или SVBU_2)\date\kks_vis_groups.json.
    При отсутствии списка, программа не произведет сортировку.

3. Программа создания файла altStation.dic который используется во время заливки блока.
    Для работы программы необходимо из последних DbDumps нужного блока 2 файла
    (файл PLS_ANA_CONF.dmp и PLS_BIN_CONF.dmp) положить в корень папки нужного блока
    (SVBU_1 или SVBU_2), а в папку NPP_models нужного блока, последние видеокадры блока
    из папки NPP_models.

        Возможности программы:
    1. Обновление списка сигналов из базы. Парсит файлы PLS_ANA_CONF.dmp и
    PLS_BIN_CONF.dmp. Собранные сигналы ANA и BIN кладет в папку
    (SVBU_1 или SVBU_2)\date в файлы ANA_list_kks.txt и BIN_list_kks.txt соответственно.

    2. Парсит ВК из папки (SVBU_1 или SVBU_2)\NPP_models и в зависимости от режима работы
    ведет поиск привязок на видеокадрах и записывает в файл
    (SVBU_1 или SVBU_2)\altStation.dic все найденные KKS сигналов с пометкой на каком
    видеокадре он найден.
        Режимы:
        1,2 - поиск всех привязок на видеокадрах, на которые есть ссылки, т.е.
        на них ссылается подмодель obj_Station_stat.svg.
        1+,2+ - поиск всех привязок на всех видеокадрах папки NPP_models

4. Программа создания новых паспортов для видеокадров

5. Программа создания файлов для TCP-Gate.
    Для работы программы необходимо из последних DbDumps нужно 3 файла
    (файл PLS_ANA_CONF.dmp, PLS_BIN_CONF.dmp, PLS_BIN_NARY_CONF.dmp) положить
    в папку (SVBU_1 или SVBU_2 или SVSU)/DbDumps.
    Последние видеокадры из папки NPP_models скопировать
    в папку (SVBU_1 или SVBU_2 или SVSU)/NPP_models.
    Файл list_kks_svg.txt содержащий список видеокадров, которые цех связи
    использует в АСУП, скопировать в папку (SVBU_1 или SVBU_2 или SVSU)/data
    При необходимости в папку (SVBU_1 или SVBU_2 или SVSU)/data/TcpGateConf/ZPUPD
    положить файлы с сигналами полученные от цеха связи для проверки этих
    сигналов в базе данных и добавления их в файл ZPUPD.cfg

        Возможности программы:
    1. Обновление списка сигналов из базы. Парсит файлы PLS_ANA_CONF.dmp,
    PLS_BIN_CONF.dmp и PLS_BIN_NARY_CONF.dmp. Собранные сигналы ANA и BIN кладет
    в папку (SVBU_1 или SVBU_2 или SVSU)\date в файлы ANA_list_kks.txt,
    BIN_list_kks.txt и BIN_NARY_kks.json.

    ANA_list_kks.txt - файл со списком аналоговых сигналов
    BIN_list_kks.txt - файл со списком сигналов
    BIN_NARY_kks.json - файл с описанием много битовых сигналов

    2. Создание файла ZPUPD.cfg.
    Программа предлагает выбрать систему для которой будет создан файл ZPUPD.cfg.
    Если выбрать СВБУ_1 или СВБУ_2, программа загружает из файла list_kks_svg.txt
    список имен видеокадров на которых будет вестись поиск сигналов.
    Дальше поочередно берет нужный svg файл из (SVBU_1 или SVBU_2)/NPP_models,
    если там его нет, пробует найти этот видеокадр в SVSU/NPP_models,
    и находит на нем все сигналы проверяя наличие их в базе данных.
    На выходе получаем в папке (SVBU_1 или SVBU_2)/TCP-Gate файл ZPUPD.cfg, 
    который нужно передать цеху связи и во время заливки системы подкинуть его 
    на сервер УПД (вход с неоперативного контура) RTS/conf/TcpGateConf/ZPUPD.cfg.
    Если выбрать СВСУ, программа будет работать точно так же, только из
    базы данных СВСУ будут предварительно удалены все сигналы баз 1-го и 2-го
    блоков. (для этого должны быть созданы в папке
    (SVBU_1 или SVBU_2)\date файлы ANA_list_kks.txt и BIN_list_kks.txt)


Программа была разработана инженером-программистом 2 категории участка СВУ
Кузьмицким Алексеем Сергеевичем в 2022-2023 году.
При возникновении каких-либо вопросов можно обратиться
ко мне по телефону +375 29 226 11 42. Успешной работы!